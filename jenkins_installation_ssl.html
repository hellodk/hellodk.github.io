<!DOCTYPE html>
<html>
<head>
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Page Meta -->
    <title>How to deploy Jenkins with SSL</title>
    <meta name="description" content="A beautiful narrative written over an elegant publishing platform. The story begins here..." />

    <!-- Mobile Meta -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Brand icon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- Ghost outputs important style and meta data with this tag -->
        <link rel="canonical" href="http://localhost:4000//jenkins_installation_ssl" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Curiosity is the most powerful thing you own" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="How to deploy Jenkins with SSL" />
    <meta property="og:description" content="A beautiful narrative written over an elegant publishing platform. The story begins here..." />
    <meta property="og:url" content="http://localhost:4000//jenkins_installation_ssl" />
    <meta property="og:image" content="/assets/images/jenkins/jenkins.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="How to deploy Jenkins with SSL" />
    <meta name="twitter:description" content="A beautiful narrative written over an elegant publishing platform. The story begins here..." />
    <meta name="twitter:url" content="http://localhost:4000//jenkins_installation_ssl" />
    <meta name="twitter:image:src" content="/assets/images/jenkins/jenkins.png" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Curiosity is the most powerful thing you own",
    "name": "How to deploy Jenkins with SSL",
    "url": "http://localhost:4000//jenkins_installation_ssl",
    "image": "/assets/images/jenkins/jenkins.png",
    "description": "A beautiful narrative written over an elegant publishing platform. The story begins here..."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Curiosity is the most powerful thing you own" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <!-- The blog navigation links -->
    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-databases " role="presentation"><a href="/tag/databases">Databases</a></li>
        <li class="nav-devops " role="presentation"><a href="/tag/devops">DevOps</a></li>
        <li class="nav-fiction " role="presentation"><a href="/tag/fiction">Fiction</a></li>
        <li class="nav-author " role="presentation"><a href="/tag/mlops">MLOps</a></li>
        <li class="nav-travel " role="presentation"><a href="/tag/travel">Travel</a></li>
        <li class="nav-resume " role="presentation"><a href="/resume">Resume</a></li>
        <li class="nav-photography " role="presentation"><a href="/tag/photography">Photography</a></li>
        <li class="nav-author " role="presentation"><a href="/author">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/jenkins/jenkins.png) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/utilities/home_icon.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-tutorials">

        <header class="post-header">
            <h1 class="post-title">How to deploy Jenkins with SSL</h1>
            <section class="post-meta">
            <!-- <a href='/'></a> -->

            
                
            
                
            
                
            
                
            
                
            
                
            
            <time class="post-date" datetime="2022-12-16">16 Dec 2022</time>
                <!-- [[tags prefix=" on "]] -->
                
                on
                
                    
                       <a href='/tag/tutorials'>Tutorials</a>,
                    
                
                    
                       <a href='/tag/jenkins'>Jenkins</a>,
                    
                
                    
                       <a href='/tag/ssl'>Ssl</a>,
                    
                
                    
                       <a href='/tag/security'>Security</a>,
                    
                
                    
                       <a href='/tag/2022'>2022</a>,
                    
                
                    
                       <a href='/tag/year'>Year</a>,
                    
                
                    
                       <a href='/tag/hellodk'>Hellodk</a>
                    
                
                
            </section>
        </header>

        <section class="post-content">

            <p>It has been quiet sometime since I got my hands dirty, so here we go today!! Recently we had a use-case where we needed to setup a Jenkins server on a public network for some POC and we as DevOps could not bear the fact that the traffic exiting from our network is in plain text. Hence we wanted to do something about it and we would like to share our view point on how did we achieved this goal.</p>

<h5 id="for-successfully-testing-this-we-have-the-below-pre-requisites">For successfully testing this, we have the below pre-requisites:</h5>
<ul>
  <li>Operating system: Ubuntu 20.04</li>
  <li>Administrator or sudo access to the server</li>
  <li>Open Internet connectivity to ensure package installation go through</li>
</ul>

<h5 id="a-high-level-set-of-the-steps-involved-will-be">A high level set of the steps involved will be:</h5>
<ul>
  <li>Generation of ssh keys followed by the verification of the generated files</li>
  <li>Updating the apt cache</li>
  <li>Installing the required packages</li>
  <li>Validating the Jenkins process is running and enabled in systemd</li>
  <li>Creating public and private SSL keys using openssl tool</li>
  <li>Getting started with the Jenkins UI and plugins installations</li>
</ul>

<h5 id="install-jenkins">Install Jenkins</h5>
<p>Follow the below steps to install Jenkins on your server</p>
<ul>
  <li>Generate SSH keys
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen
</code></pre></div>    </div>
  </li>
  <li>Verify the generated key files
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -ltr ~/.ssh
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_ssh_keys_verification.png" alt="" title="ssh keys verification" /></p>
  </li>
  <li>Now that the ssh keys have been validated we can go ahead and install Jenkins alons with itâ€™s dependencies using the below commands
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
sudo apt-add-repository "deb https://pkg.jenkins.io/debian-stable binary/"
sudo apt-get update -y
sudo apt install git vim telnet curl wget tree default-jdk jenkins openssl nginx -y
systemctl status jenkins
</code></pre></div>    </div>
  </li>
  <li>
    <p>Verify the Jenkins Installation by going to the browser on port 8080
<img src="assets/images/jenkins/jenkins_verify_installation.png" alt="" title="Jenkins Installation verification" /></p>
  </li>
  <li>Create the private and public ssl keys using the openssl tool
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl req -newkey rsa:2048 -nodes -keyout key.pem -x509 -days 365 -out cert.pem
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_open_ssl.png" alt="" title="open ssl certificate creation" /></p>
  </li>
  <li>Convert the generated keys into a .p12 keystore, it will ask for a password. For the sake of convenience I will be setting them as Jenkins123
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl pkcs12 -inkey key.pem -in cert.pem -export -out cert.p12
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_pkcs12.png" alt="" title="jenkins pkcs12" /></p>
  </li>
  <li>Importing the .p12 using the keytool utility to a destination keystore with the name jenkins.jks with the destination store type as JKS
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keytool -importkeystore -srckeystore ./cert.p12 -srcstoretype pkcs12 -destkeystore jenkins.jks -deststoretype JKS
</code></pre></div>    </div>
  </li>
  <li>Copy the jenkins.jks to a location which is accessible by the Jenkins process and also change the owner and group of the file ot jenkins
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cp jenkins.jks /var/lib/jenkins/
sudo chown jenkins:jenkins /var/lib/jenkins/jenkins.jks
</code></pre></div>    </div>
  </li>
  <li>Edit the Jenkins systemd file
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo vim /usr/lib/systemd/system/jenkins.service
</code></pre></div>    </div>
  </li>
  <li>And add the below 3 lines as shown in the image
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Environment="JENKINS_HTTPS_PORT=8443"
Environment="JENKINS_HTTPS_KEYSTORE=/var/lib/jenkins/jenkins.jks"
Environment="JENKINS_HTTPS_KEYSTORE_PASSWORD=Jenkins123"
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_service_file.png" alt="" title="jenkins service file" /></p>
  </li>
  <li>Reload the systemctl daemon as there has been a change in the service file
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl daemon-reload
</code></pre></div>    </div>
  </li>
  <li>Restart the Jenkins process
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl restart jenkins
</code></pre></div>    </div>
  </li>
  <li>Check the status of the Jenkins process
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl status jenkins
</code></pre></div>    </div>
  </li>
  <li>Verify if the Jenkins process is running on https. We will see the app running on port 8443 as well
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -ntplau | grep -i java
</code></pre></div>    </div>
  </li>
</ul>

<p>This ensures Jenkins runs on SSL, now we would need to setup a reverse proxy using nginx to serve the traffic.</p>



        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->
            
                
            
                
            
                
            
                
            
                
            
                
            

            <!-- Add Disqus Comments -->
            

        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/jenkins/jenkins_1.png)" href="/productivity-with-twitter">
            <section class="post">
                <h2>Productivity with Twitter</h2>
                <p>#### Productivity with Twitter

</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev no-cover" href="/sublime-upgrade">
            <section class="post">
                <h2>Upgrading Sublime Text</h2>
                <p>Upgrade your Sublime Text with the below steps Environment Details OS Ubuntu-20.04 From the Sublime...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <!-- The tiny footer at the very bottom -->
        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Curiosity is the most powerful thing you own</a> &copy; 2023</section>
          <section class="poweredby">Published by <a href="https://thecylon.org">theCylon.org</a></section>
        </footer>
    </div>
    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- jQuery needs to come before `` so that jQuery can be used in code injection -->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <!-- Ghost outputs important scripts and data with this tag -->
    <!--  -->
    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-84547172-1', 'auto');
  ga('send', 'pageview');
  </script>
    <!-- Fitvids makes video embeds responsive and awesome -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <!-- The main JavaScript file for Casper -->
    <script type="text/javascript" src="/assets/js/index.js"></script>

</body>
</html>
