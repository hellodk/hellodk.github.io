<?xml version="1.0" encoding="UTF-8" ?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
   
      <title>https://hellodk.io/</title>
   
   <link>http://localhost:4000</link>
   <description>A beautiful narrative written over an elegant publishing platform. The story begins here...</description>
   <language>en-uk</language>
   <managingEditor> </managingEditor>
   <atom:link href="rss" rel="self" type="application/rss+xml" />
   
	<item>
	  <title>How to deploy Jenkins with SSL</title>
	  <link>//jenkins_installation_ssl</link>
	  <author></author>
	  <pubDate>2022-12-16T15:48:00+05:30</pubDate>
	  <guid>//jenkins_installation_ssl</guid>
	  <description><![CDATA[
	     <p>It has been quiet sometime since I got my hands dirty, so here we go today!! Recently we had a use-case where we needed to setup a Jenkins server on a public network for some POC and we as DevOps could not bear the fact that the traffic exiting from our network is in plain text. Hence we wanted to do something about it and we would like to share our view point on how did we achieved this goal.</p>

<h5 id="for-successfully-testing-this-we-have-the-below-pre-requisites">For successfully testing this, we have the below pre-requisites:</h5>
<ul>
  <li>Operating system: Ubuntu 20.04</li>
  <li>Administrator or sudo access to the server</li>
  <li>Open Internet connectivity to ensure package installation go through</li>
</ul>

<h5 id="a-high-level-set-of-the-steps-involved-will-be">A high level set of the steps involved will be:</h5>
<ul>
  <li>Generation of ssh keys followed by the verification of the generated files</li>
  <li>Updating the apt cache</li>
  <li>Installing the required packages</li>
  <li>Validating the Jenkins process is running and enabled in systemd</li>
  <li>Creating public and private SSL keys using openssl tool</li>
  <li>Getting started with the Jenkins UI and plugins installations</li>
</ul>

<h5 id="install-jenkins">Install Jenkins</h5>
<p>Follow the below steps to install Jenkins on your server</p>
<ul>
  <li>Generate SSH keys
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen
</code></pre></div>    </div>
  </li>
  <li>Verify the generated key files
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -ltr ~/.ssh
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_ssh_keys_verification.png" alt="" title="ssh keys verification" /></p>
  </li>
  <li>Now that the ssh keys have been validated we can go ahead and install Jenkins alons with itâ€™s dependencies using the below commands
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
sudo apt-add-repository "deb https://pkg.jenkins.io/debian-stable binary/"
sudo apt-get update -y
sudo apt install git vim telnet curl wget tree default-jdk jenkins openssl nginx -y
systemctl status jenkins
</code></pre></div>    </div>
  </li>
  <li>
    <p>Verify the Jenkins Installation by going to the browser on port 8080
<img src="assets/images/jenkins/jenkins_verify_installation.png" alt="" title="Jenkins Installation verification" /></p>
  </li>
  <li>Create the private and public ssl keys using the openssl tool
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl req -newkey rsa:2048 -nodes -keyout key.pem -x509 -days 365 -out cert.pem
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_open_ssl.png" alt="" title="open ssl certificate creation" /></p>
  </li>
  <li>Convert the generated keys into a .p12 keystore, it will ask for a password. For the sake of convenience I will be setting them as Jenkins123
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl pkcs12 -inkey key.pem -in cert.pem -export -out cert.p12
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_pkcs12.png" alt="" title="jenkins pkcs12" /></p>
  </li>
  <li>Importing the .p12 using the keytool utility to a destination keystore with the name jenkins.jks with the destination store type as JKS
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keytool -importkeystore -srckeystore ./cert.p12 -srcstoretype pkcs12 -destkeystore jenkins.jks -deststoretype JKS
</code></pre></div>    </div>
  </li>
  <li>Copy the jenkins.jks to a location which is accessible by the Jenkins process and also change the owner and group of the file ot jenkins
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cp jenkins.jks /var/lib/jenkins/
sudo chown jenkins:jenkins /var/lib/jenkins/jenkins.jks
</code></pre></div>    </div>
  </li>
  <li>Edit the Jenkins systemd file
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo vim /usr/lib/systemd/system/jenkins.service
</code></pre></div>    </div>
  </li>
  <li>And add the below 3 lines as shown in the image
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Environment="JENKINS_HTTPS_PORT=8443"
Environment="JENKINS_HTTPS_KEYSTORE=/var/lib/jenkins/jenkins.jks"
Environment="JENKINS_HTTPS_KEYSTORE_PASSWORD=Jenkins123"
</code></pre></div>    </div>
    <p><img src="assets/images/jenkins/jenkins_service_file.png" alt="" title="jenkins service file" /></p>
  </li>
  <li>Reload the systemctl daemon as there has been a change in the service file
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl daemon-reload
</code></pre></div>    </div>
  </li>
  <li>Restart the Jenkins process
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl restart jenkins
</code></pre></div>    </div>
  </li>
  <li>Check the status of the Jenkins process
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl status jenkins
</code></pre></div>    </div>
  </li>
  <li>Verify if the Jenkins process is running on https. We will see the app running on port 8443 as well
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -ntplau | grep -i java
</code></pre></div>    </div>
  </li>
</ul>

<p>This ensures Jenkins runs on SSL, now we would need to setup a reverse proxy using nginx to serve the traffic.</p>


	  ]]></description>
	</item>


</channel>
</rss>
